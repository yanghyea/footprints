<!DOCTYPE HTML>

<html>
	<head>
		<script src='http://code.jquery.com/jquery-1.7.1.min.js'></script>
		<script src='models/concerts.js'></script>
		<script src='routes/concertRoutes.js'></script>
		<script src='app.js'></script>
		<title>footprints</title>
	</head>

	<body>
		<h3>footprint</h3>

			<!-- Concert Event inputs -->
			Event Type (e.g. Concert, Festival, CMU): <input type= 'text' id='ctype' name='eventType'> <br><br>
			Event Name: <input type= 'text' id='cname' name='eventName'> <br><br>
			Date: <input type= 'text' id='cdate' name='date'> <br><br>
			Venue: <input type= 'text' id='cvenue' name='venue'> <br><br> 

			<!-- Buttons for CRUD functions -->
			<form id='putForm'>
				<button>Add New Event</button> *Input all fields to create new event
			</form>
			<form id='getForm'>
				<button>View Event Details</button> *Input event type, event name, and event date to view details
			</form>
			<form id='postForm'>
				<button>Update Event Details</button> *Input all fields to update event details
			</form>
			<form id='deleteForm'>
				<button>Delete Event</button> *Input all fields to delete event
			</form>
			<br>

			<form id='seeAll'>
				<button>View All Events</button> *Input the event type to see all events for that particular type! (i.e. all concerts, all festivals, etc.)
			</form>

		<!-- Displays Results from Ajax Request -->
		<div id='displayCollection'>
			<h4>Events Display:</h4> 
			<span id="current"></span>
		</div>

			<script>
			$(function() {
				// PUT ajax request
				$('#putForm').submit(function(){
					var query = '/concerts/';
					query += $('#ctype').val() + "?" + "eventName=" + $('#cname').val() + "&" + "date=" + $('#cdate').val() 
										+ "&" + "venue=" + $('#cvenue').val();
					console.log(query);
					$.ajax({
						url: query,
						type: 'PUT',
						success: function(result) {
							$('#current').html(result);
						}
					});
					return false;
				});

				// GET ajax request
				$('#getForm').submit(function(){
					var query = '/concerts/';
					query += $('#ctype').val() + "?" + "eventName=" + $('#cname').val() + "&" + "date=" + $('#cdate').val(); 
					$.ajax({
						url: query,
						type: 'GET',
						success: function(result) {
							$('#current').html(result);
						}
					});
					return false;
				});

				// retrieve all concertes (table)
				$('#seeAll').submit(function(){
					var query = '/concerts/';
					query += $('#ctype').val();
					$.ajax({
						url: query,
						type: 'GET',
						success: function(result) {
							$('#current').html(result);
						}
					});
					return false;
				});

				// POST (update) ajax request
				$('#postForm').submit(function(){
					var query = '/concerts/';
					query += $('#ctype').val() + "/" + $('#cname').val() + "?" + "eventName=" + $('#cname').val() + "&" 
										+ "date=" + $('#cdate').val() + "&" + "venue=" + $('#cvenue').val();
					$.ajax({
						url: query,
						type: 'POST',
						success: function(result) {
							$('#current').html(result);
						}
					});
					return false;
				});

				// DELETE ajax request
				$('#deleteForm').submit(function(){
					var query = '/concerts/';
					query += $('#ctype').val() + "?" + "eventName=" + $('#cname').val() + "&" + "date=" + $('#cdate').val();
					$.ajax({
						url: query,
						type: 'DELETE',
						success: function(result) {
							$('#current').html(result);
						}
					});
					return false;
				});
			});
		</script>

	</body>
</html>

